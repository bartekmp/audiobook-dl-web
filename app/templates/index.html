{% extends "base.html" %}

{% block title %}Home - audiobook-dl-web{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8 mx-auto">
        <div class="text-center mb-5">
            <h1 class="display-4"><i class="bi bi-book"></i> audiobook-dl-web</h1>
            <p class="lead">Web interface for downloading audiobooks from various services</p>
        </div>

        <!-- Quick Status -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0"><i class="bi bi-info-circle"></i> Quick Start</h5>
            </div>
            <div class="card-body">
                {% if configured_services %}
                <div class="alert alert-success">
                    <i class="bi bi-check-circle"></i> You have configured {{ configured_services|length }} service(s).
                    Ready to <a href="/download" class="alert-link">start downloading</a>!
                </div>

                <h6>Configured Services:</h6>
                <ul class="list-group list-group-flush">
                    {% for service_id in configured_services %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <span>
                            <i class="bi bi-check-circle-fill text-success"></i>
                            {{ services[service_id].name if service_id in services else service_id }}
                        </span>
                        <a href="/configure?service={{ service_id }}" class="btn btn-sm btn-outline-primary">
                            <i class="bi bi-pencil"></i> Edit
                        </a>
                    </li>
                    {% endfor %}
                </ul>
                {% else %}
                <div class="alert alert-warning">
                    <i class="bi bi-exclamation-triangle"></i> No services configured yet.
                    Please <a href="/configure" class="alert-link">configure a service</a> first.
                </div>
                {% endif %}
            </div>
        </div>

        <!-- Supported Services -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0"><i class="bi bi-list-check"></i> Supported Services</h5>
            </div>
            <div class="card-body">
                <div class="row g-3">
                    {% for service_id, service_info in services.items() %}
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-body">
                                <h6 class="card-title">
                                    {% if service_id in configured_services %}
                                    <i class="bi bi-check-circle-fill text-success"></i>
                                    {% else %}
                                    <i class="bi bi-circle text-muted"></i>
                                    {% endif %}
                                    {{ service_info.name }}
                                </h6>
                                <p class="card-text small text-muted">
                                    Auth: {{ service_info.auth_methods|join(', ') }}
                                </p>
                                {% if service_info.requires_shelf %}
                                <p class="card-text">
                                    <span class="badge bg-warning text-dark">
                                        <i class="bi bi-exclamation-triangle"></i>
                                        Add to shelf before download
                                    </span>
                                </p>
                                {% endif %}
                                {% if service_id not in configured_services %}
                                <a href="/configure?service={{ service_id }}" class="btn btn-sm btn-primary">
                                    <i class="bi bi-gear"></i> Configure
                                </a>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}